[["index.html", "Open Soil Spectral Library 1 About 1.1 Soil Spectroscopy for Global Good 1.2 What is soil spectroscopy? 1.3 Open Soil Spectral Library 1.4 OSSL mongoDB 1.5 Target variables of interest 1.6 Contributing data 1.7 Contributing documentation 1.8 Contributors 1.9 Disclaimer 1.10 Licence 1.11 Suggested literature 1.12 Acknowledgments", " Open Soil Spectral Library Woodwell Climate Research Center, University of Florida, OpenGeoHub and contributors 08 December, 2021 1 About This document is UNDER CONSTRUCTION. â€œManâ€™s most human characteristic is not his ability to learn, which he shares with many other species, but his ability to teach and store what others have developed and taught him.â€ Margaret Mead, Culture and Commitment: The New Relationships Between the Generations in the 1970s 1.1 Soil Spectroscopy for Global Good SoilSpec4GG is a USDA-funded Food and Agriculture Cyberinformatics Tools Coordinated Innovation Network NIFA Award #2020-67021-32467 project. It brings together soil scientists, spectroscopists, informaticians, data scientists and software engineers to overcome some of the current bottlenecks preventing wider and more efficient use of soil spectroscopy. A series of working groups will be formed to address topics including calibration transfer, model choice, outreach &amp; demonstration, and use of spectroscopy to inform global carbon cycle modeling. For more info refer to: https://soilspectroscopy.org/. R tutorials and software developed to implement OSSL is available via: https://github.com/soilspectroscopy. Soil spectroscopy for global good project works with other global initiatives including the FAO Global Soil Partnership and the IEEE P4005 Standards and Protocols for Soil Spectroscopy Working Group. 1.2 What is soil spectroscopy? Soil spectroscopy is the measurement of light absorption when light in the visible, near infrared or mid infrared (Visâ€“NIRâ€“MIR) regions of the electromagnetic spectrum is applied to a soil surface. The proportion of the incident radiation reflected by soil is sensed through Visâ€“NIRâ€“MIR reflectance spectroscopy. These characteristic spectra (see Fig. below) can then be used to estimate numerous soil attributes including: minerals, organic compounds and water. Figure 1.1: Schematic explanation of the soil spectroscopy. For more info see: https://soilspectroscopy.org/. 1.3 Open Soil Spectral Library Open Soil Spectral Library (OSSL) is a suite of datasets, web-services, software and tutorials. It includes (see also https://github.com/soilspectroscopy): A soil spectral DB (mongoDB), API calibration service available from https://api.soilspectroscopy.org, Front-end solutions: OSSL Engine and Explorer, An R package ossl with all functionality used by the API, Registry of global and local calibration models (https://github.com/soilspectroscopy/), Tutorials included in this book, The OSSL-DB has been prepared following the OSSL schema which is available at: As a general rule of thumb we recommend all contributors to use the following general OSSL scheme to organize Soil Observations &amp; Measurements with four main tables and metadata + legends organized in other tables: Figure 1.2: Recommended OSSL database schema. To access global compilation of soil legacy point data sets refer to https://github.com/OpenGeoHub/SoilSamples repository. To access and use Soil Spectroscopy tools also refer to https://soilspectroscopy.org/. Figure 1.3: Up-to-date distribution of points with VisNIR scans. Figure 1.4: Up-to-date distribution of points with MIR scans. 1.4 OSSL mongoDB MongoDB is an Open Source noSQL DB hence fast and fully scalable and extendable (affordable costs for cloud solutions such as MongoDB Atlas and similar). TensorFlow and other cutting-edge ML algorithms can be easily integrated and served through a GUI. To access OSSL DB best use the mongoDB either through a graphical user interface using Robo 3T, or by using the mongodb via R. The following parameters (database credentials) allow ready only access to DB: Name: soilspec4gg Address: api.soilspectroscopy.org Database: soilspec4gg Username: soilspec4gg Password: soilspec4gg Figure 1.5: Accessing the OSSL DB using MongoDB GUI. First, we need to specify the parameters: library(mongolite) library(jsonify) source(&quot;R/ossl_functions.R&quot;) soilspec4gg.db = list( host = &#39;api.soilspectroscopy.org&#39;, name = &#39;soilspec4gg&#39;, user = &#39;soilspec4gg&#39;, pw = &#39;soilspec4gg&#39; ) soilspec4gg.db$url &lt;- paste0( &#39;mongodb://&#39;, soilspec4gg.db$user, &#39;:&#39;, soilspec4gg.db$pw, &#39;@&#39;, soilspec4gg.db$host, &#39;/&#39;, soilspec4gg.db$name, &#39;?ssl=true&#39; ) Next, we can initiate connection: soilspec4gg.init() ## [1] &quot;Creating the access for mongodb collections.&quot; and now we can query and load data directly into R, for example to get a sample from AfSIS1: id = &quot;icr006475&quot; soilspec.sample = soilspec4gg.samplesById(id) ## [1] &quot;Accessing mongodb collections.&quot; ## Found 4 records... Imported 4 records. Simplifying into dataframe... ## Found 4 records... Imported 4 records. Simplifying into dataframe... ## Found 1 records... Imported 1 records. Simplifying into dataframe... ## Imported 0 records. Simplifying into dataframe... dim(soilspec.sample) ## [1] 16 1758 1.5 Target variables of interest Soil spectral scan, through the calibration procedure, are used to determine various soil variables. GLOSOLANâ€™s Standard Operating Procedures (SOPs) list four groups of soil variables of interest to international soil spectroscopy projects: Soil chemical variables: pH, Carbon, Phosphorous, Potassium, Nitrogen, Exchangeable cations and CEC, Extractable microelements, Trace and major element analyses, Gypsum, Electrical conductivity and total soluble salt content, Soluble sulfate and chloride analysis, Special analysis for peats, mineral and organic soils, agriculture and forest, Soil physical variables: Bulk density, Coarse fragments, Particle-size distribution, Water retention curve, Porosity, Hydraulic conductivity function, Aggregate stability, Moisture content, Soil biological variables: Microbial biomass, Soil Respiration, Enzyme activity, Microbial identification, Soil contaminants: Heavy metal elements: As, Hg, Cu, Cd, Pb and similar, Other soil pollutants, This list is constantly updated. In the OSSL we focus on soil variables for which there is enough global calibration measurements to fit reasonable models. Currently, the largest component of the OSSL is the USDAâ€™s KSSL data that list about 60 variables for which there is enough data to fit calibration models. 1.6 Contributing data We encourage public and private entities to help this project and share SSL data. The following four modes of data sharing are especially encouraged: Open your data by releasing it under Creative Commons (CC-BY, CC-BY-SA) or Open Data Commons Open Database License (ODbL). This data can then directly imported into the OSSL. Donate a small part (e.g.Â 5%) of your data (release under CC-BY, CC-BY-SA and/or ODbL). This data can then directly imported into the OSSL. Allow SoilSpectroscopy.org project direct access to your data so that we can run data mining and then release ONLY results of data mining under some Open Data license. Use OSSL data to produce new derivative products, then share them through own infrastructures OR contact us for providing hosting support. We can sign professional Data Sharing Agreements with data producers that specify in detail how will the data be used. Our primary interest is in enabling research, sharing and use of models (calibration and prediction) and collaboration of groups across borders. We take especial care that your data is secured, encrypted where necessary, and kept safely, closely following our privacy policy and terms of use. 1.7 Contributing documentation Please feel free to contribute technical documentation. See GitHub repository for more detailed instructions. Information outdated or missing? Please open an issue or best do a correction in the text and then make a pull request. 1.8 Contributors If youâ€™ve contribute, add also your name and Twitter, ORCID or blog link below: Jonathan Sanderman, Tomislav Hengl, Katherine Todd-Brown, Leandro L. Parente, Wanderson de Sousa Mendes 1.9 Disclaimer Whilst utmost care has been taken by the Soil Spectroscopy project and data authors while collecting and compiling the data, the data is provided â€œas isâ€. Woodwell Climate Research Center, University of Florida, OpenGeoHub foundation and its suppliers and licensors hereby disclaim all warranties of any kind, express or implied, including, without limitation, the warranties of merchantability, fitness for a particular purpose and non-infringement. Neither Woodwell Climate Research Center, University of Florida, OpenGeoHub foundation nor its suppliers and licensors, makes any warranty that the Website will be error free or that access thereto will be continuous or uninterrupted. You understand that you download from, or otherwise obtain content or services through, the Website at your own discretion and risk. In no event shall the data authors, the Soil Spectroscopy project, or relevant funding agencies be liable for any actual, incidental or consequential damages arising from use of the data. By using the Soil Spectroscopy project data, the user expressly acknowledges that the Data may contain some nonconformities, defects, or errors. No warranty is given that the data will meet the userâ€™s needs or expectations or that all nonconformities, defects, or errors can or will be corrected. The user should always verify actual data; therefore the user bears all responsibility in determining whether the data is fit for the userâ€™s intended use. This document is under construction. If you notice an error or outdated information, please submit a correction / pull request or open an issue. This is a community project. No profits are being made from building and serving Open Spectral Library. If you would like to become a sponsor of the project, please contact us via: https://soilspectroscopy.org/contact/. 1.10 Licence This website/book and attached software is free to use, and is licensed under the MIT License. The OSSL training data and models, if not otherwise indicated, is available either under the Creative Commons Attribution 4.0 International CC-BY and/or CC-BY-SA license / Open Data Commons Open Database License (ODbL) v1.0. 1.11 Suggested literature Some other connected publications and initiatives describing collation and import of soil spectroscopy data: Ayres, E. (2019). Quantitative Guidelines for Establishing and Operating Soil Archives. Soil Science Society of America Journal, 83(4), 973-981. https://doi.org/10.2136/sssaj2019.02.0050 Benedetti, F. and van Egmond, F. (2021). Global Soil Spectroscopy Assessment. Spectral soil data â€“ Needs and capacities. Rome, FAO. https://doi.org/10.4060/cb6265en Dudek, M., KabaÅ‚a, C., Åabaz, B., MituÅ‚a, P., Bednik, M., &amp; MedyÅ„ska-Juraszek, A. (2021). Mid-Infrared Spectroscopy Supports Identification of the Origin of Organic Matter in Soils. Land, 10(2), 215. https://doi.org/10.3390/land10020215 GLOSOLANâ€™s Standard Operating Procedures (SOPs); Nocita, M., Stevens, A., van Wesemael, B., Aitkenhead, M., Bachmann, M., BarthÃ¨s, B., â€¦ &amp; Wetterlind, J. (2015). Soil spectroscopy: An alternative to wet chemistry for soil monitoring. Advances in agronomy, 132, 139-159. https://doi.org/10.1016/bs.agron.2015.02.002 Sanderman, J., Savage, K., Dangal, S. R., Duran, G., Rivard, C., Cavigelli, M. A., â€¦ &amp; Stewart, C. (2021). Can Agricultural Management Induced Changes in Soil Organic Carbon Be Detected Using Mid-Infrared Spectroscopy?. Remote Sensing, 13(12), 2265. https://doi.org/10.3390/rs13122265 Sanderman, J., Savage, K., &amp; Dangal, S. R. (2020). Mid-infrared spectroscopy for prediction of soil health indicators in the United States. Soil Science Society of America Journal, 84(1), 251â€“261. https://doi.org/10.1002/saj2.20009 Wijewardane, N. K., Ge, Y., Wills, S., &amp; Libohova, Z. (2018). Predicting physical and chemical properties of US soils with a mid-infrared reflectance spectral library. Soil Science Society of America Journal, 82(3), 722â€“731. https://doi.org/10.2136/sssaj2017.10.0361 Wadoux, A.M.J.-C., Malone, B., McBratney, A.B., Fajardo, M., Minasny, B., (2021). Soil Spectral Inference with R: Analysing Digital Soil Spectra Using the R Programming Environment. Progress in Soil Science, Springer Nature, ISBN: 9783030648961, 274 pp.Â  1.12 Acknowledgments Open Soil Spectral Library was possible due to the kind contributions by public and private organizations. Listed based on the date of import: USDA-NRCS Kellogg Soil Survey Laboratory mid-infrared (MIR) spectral library (Wijewardane et al. 2018; Sanderman, Savage, and Dangal 2020) was used as the basis for this data set and corresponding services; we are especially grateful to Rich Ferguson &amp; Scarlett Murphy (NRCS USDA) for their help with importing and using the KSSL Soil Spectral Library; ICRAF-ISRIC Soil VNIR Spectral Library (Garrity and Bindraban 2004; Aitkenhead and Black 2018) 785 soil profiles (4,438 samples) selected from the Soil Information System (ISIS) of the International Soil Reference and Information Centre (ISRIC) https://doi.org/10.34725/DVN/MFHA9C; AfSIS-I Soil Spectral Library Mid-Infrared Spectra (MIRS) from ICRAF Soil and Plant Spectroscopy Laboratory Africa Soil Information Service (AfSIS) Phase I 2009-2013 (Vagen et al. 2020), a collaborative project funded by the Bill and Melinda Gates Foundation (BMGF). Partners included, CIAT-TSBF, ISRIC, CIESIN, The Earth Institute at Columbia University and World Agroforestry (ICRAF) https://doi.org/10.34725/DVN/QXCWP1; LUCAS topsoil (VisNIR) Soil Spectral Library (Orgiazzi et al. 2018) was made available by the European Commission through the European Soil Data Centre managed by the Joint Research Centre (JRC), http://esdac.jrc.ec.europa.eu/; we have degraded location accuracy of points so that exact locations are about 1-km off; The Central African Soil Spectral Library described in detail in Summerauer et al. (2021) contains limited number of samples representing Central Africa https://doi.org/10.5281/zenodo.4320395; The National Ecological Observatory Network (NEON) Soil Spectral is based on the NEON soil data (Ayres 2019), which were scanned by the Woodwell Climate Research and USDA-NRCS Kellogg Soil Survey Laboratory; the (NEON) Megapit Soil Archive is a program sponsored by the National Science Foundation and operated under cooperative agreement by Battelle; We are grateful to Wanderson de Sousa Mendes (Leibniz Centre for Agricultural Landscape Research (ZALF)) for help with initial screening of the data for the development of the R code for processing soil spectroscopy data. For more advanced uses of the soil spectral libraries we advise to contact the original data producers especially to get help with using, extending and improving the original SSL data. We are also grateful to USDA National Institute of Food and Agriculture #2020-67021-32467 for providing funding for this project. References "],["new-to-markdown-start-here.html", "2 New to markdown. Start here 2.1 Clone, add reference, submit merge requestâ€¦ 2.2 Video Course: Getting started with R", " 2 New to markdown. Start here 2.1 Clone, add reference, submit merge requestâ€¦ To add a new dataset, please follow these steps: Click on the edit button on the book homepage, Login to Github.com and select â€œStart a pull-request,â€ Add new references to 020-dataset_list.Rmd and save, Commit and push and make a pull request. Once received we will check it and if you have followed the instructions closely, the reference will appear in the document as soon as the code is merged with the master, Figure 2.1: Example of a pull request on Github.com. If youâ€™re new to markdown and want to learn how to use it, please refer to this tutorial. If you are new to R and/or pedometrics, please consider reading / studying: Kabacoff, R.I., (2011). R in Action: Data Analysis and Graphics with R. Manning publications, ISBN: 9781935182399, 472 pages. California Soil Resource Lab, (2017). Open Source Software Tools for Soil Scientists, UC Davis., Grolemund, G., (2014). Hands-On Programming with R. Oâ€™Reilly, https://github.com/rstudio-education/hopr Hengl, T., MacMillan, R.A., (2019). Predictive Soil Mapping with R. OpenGeoHub foundation, Wageningen, the Netherlands, 370 pages, https://soilmapper.org, ISBN: 978-0-359-30635-0. RStudio, Wadoux, A.M.J.-C., Malone, B., McBratney, A.B., Fajardo, M., Minasny, B., (2021). Soil Spectral Inference with R: Analysing Digital Soil Spectra Using the R Programming Environment. Progress in Soil Science, Springer Nature, ISBN: 9783030648961, 274 pp.Â  If youâ€™d like more of a roadmap to guide you through R, have a look at Oscarâ€™s blogpost: https://oscarbaruffa.com/a-roadmap-for-getting-started-with-r/ 2.2 Video Course: Getting started with R If you prefer video instruction with progress tracking: https://rfortherestofus.com/courses/getting-started/ "],["soil-spectroscopy-tools-and-users.html", "3 Soil spectroscopy tools and users 3.1 Soil Spectroscopy Instruments 3.2 Registered soil spectral libraries 3.3 Soil spetroscopy organizations 3.4 Soil Spectroscopy software", " 3 Soil spectroscopy tools and users 3.1 Soil Spectroscopy Instruments Figure 1.2: Most frequently used MIR / VISNIR instruments based on Benedetti and van Egmond (2021). 3.1.1 Bruker Alpha 1_FT-MIR_Zn Se ğŸ†” Bruker_Alpha1_FT.MIR.Zn.Se ğŸ­ Producer: Bruker ğŸ”— Documentation: https://www.bruker.com/ ğŸ“‚ Model type: MIR (4000-400 cm-1) ğŸ“… Production year: 2012 3.1.2 Bruker Alpha 1_FT-MIR_KBr ğŸ†” Bruker_Alpha1_FT.MIR.KBr ğŸ­ Producer: Bruker ğŸ”— Documentation: https://www.bruker.com/ ğŸ“‚ Model type: MIR (4000-400 cm-1) ğŸ“… Production year: 2012 3.1.3 Bruker Vertex 70 with HTS-XT accessory ğŸ†” Bruker_Vertex_70.HTS.XT ğŸ­ Producer: Bruker ğŸ”— Documentation: https://www.bruker.com/en/products-and-solutions/infrared-and-raman/ft-ir-research-spectrometers/vertex-research-ft-ir-spectrometer.html ğŸ“‚ Model type: MIR (4000-400 cm-1) ğŸ“… Production year: 2012 3.1.4 ASD Labspec 2500 with Muglight accessory ğŸ†” ASD_Labspec_2500_MA ğŸ­ Producer: Malvern Panalytical Ltd / Spectris ğŸ”— Documentation: https://www.malvernpanalytical.com/en/products/product-range/asd-range/labspec-range ğŸ“‚ Model type: NIR (350nm - 2500nm) ğŸ“… Production year: 2018 3.1.5 ASD FieldSpec FR ğŸ†” ASD_FieldSpec_FR ğŸ­ Producer: Analytical Spectral Devices, Inc. ğŸ”— Documentation: https://www.laboratorynetwork.com/doc/fieldspec-pro-fr-portable-spectroradiometer-0001 ğŸ“‚ Model type: NIR (350nm - 2500nm) ğŸ“… Production year: 2016 3.1.6 XDS Rapid Content Analyzer ğŸ†” XDS_Rapid_Content_Analyzer ğŸ­ Producer: FOSS NIRSystems Inc. ğŸ”— Documentation: https://www.selectscience.net/products/xds-rapid-content-analyzer/?prodID=106696 ğŸ“‚ Model type: NIR (Si 400â€“1100 nm and PbS 1100â€“2500 nm detectors) ğŸ“… Production year: 2008 3.2 Registered soil spectral libraries 3.2.1 KSSL.SSL Description: MIR and NIR spectral library and associated soil characterization database, which now includes &gt;50,000 MIR spectra collected on soils primarily from the United States. Freely available by request (see below). ğŸ“• Seybold, C. A., Ferguson, R., Wysocki, D., Bailey, S., Anderson, J., Nester, B., â€¦ &amp; Thomas, P. (2019). Application of Midâ€Infrared Spectroscopy in Soil Survey. Soil Science Society of America Journal, 83(6), 1746-1759. https://doi.org/10.2136/sssaj2019.06.0205 / Sanderman, J., Savage, K., &amp; Dangal, S. R. (2020). Midâ€infrared spectroscopy for prediction of soil health indicators in the United States. Soil Science Society of America Journal, 84(1), 251-261. https://doi.org/10.1002/saj2.20009 ğŸ”— Project website: https://www.nrcs.usda.gov/wps/portal/nrcs/main/soils/research/ Â©ï¸ Data license: CC-BY ğŸ“ Unique sites: 61,103 ğŸ“‹ Unique complete scans: ğŸ“ Import steps: KSSL 3.2.2 ICRAF.ISRIC Description: A Globally Distributed Soil Spectral Library Mid Infrared Diffuse Reflectance Spectra. MIR scans for some 785 profiles from the ISRIC World Soil Reference Collection. The samples are from 58 countries spanning Africa, Asia, Europe, North America, and South America. Data available under the CC-BY 4.0 license. ğŸ“• World Agroforestry Centre, (2014). The ICRAF/ISRIC spectral library, Soil-Plant Spectral Diagnostics laboratory, United Nations Avenue, Nairobi, Kenya. ğŸ”— Project website: https://www.worldagroforestry.org/sd/landhealth/soil-plant-spectral-diagnostics-laboratory/soil-spectra-library Â©ï¸ Data license: CC-BY 4.0 ğŸ“ Unique locations: 785 ğŸ“‹ Unique complete scans: 4308 ğŸ“ Import steps: ICRAF_ISRIC 3.2.3 LUCAS.SSL Description: LUCAS 2009, 2015 top-soil data. VisNIR scans of some 19,860 in 2009 (2012) and 21,859 points in 2015. Data available publicly under condition that â€œGraphical representation of individual units on a map is permitted as far as the geographical location of the soil samples is not detectableâ€. Additional 600 samples have been scanned by Woodwell Climate Research using an MIR instrument. ğŸ“• Jones, A, Fernandez-Ugalde, O., Scarpa, S., (2020). LUCAS 2015 Topsoil Survey. Presentation of dataset and results, EUR 30332 EN, Publications Office of the European Union: Luxembourg, ISBN 978-92-76-21080-1, doi:10.2760/616084, JRC121325. ğŸ”— Project website: https://esdac.jrc.ec.europa.eu/resource-type/soil-point-data Â©ï¸ Data license: JRC License Agreement ğŸ“ Unique locations: 41,719 ğŸ“‹ Unique complete scans: 41,719 ğŸ“ Import steps: LUCAS 3.2.4 AFSIS1.SSL Description: Africa Soil Information Service (AfSIS) Soil Chemistry Phase I. MIR and VisNIR scans of 1903 georeferenced soil samples collected from 19 countries in Sub-Saharan Africa including a suite of wet chemistry data. Data available publicly under Open Data Commons Open Database License (â€œODbLâ€) version 1.0, with attribution to AfSIS. Data retrieved from: https://registry.opendata.aws/afsis/ and https://doi.org/10.34725/DVN/QXCWP1. ğŸ“• VÃ¥gen, T.-G., Winowiecki, L.A., Desta, L., Tondoh, E.J., Weullow, E., Shepherd, K., Sila, A., (2020). Mid-Infrared Spectra (MIRS) from ICRAF Soil and Plant Spectroscopy Laboratory: Africa Soil Information Service (AfSIS) Phase I 2009-2013. https://doi.org/10.34725/DVN/QXCWP1, World Agroforestry - Research Data Repository, V1, UNF:6:bMN2MBGqFewDKHPgIeRjog== [fileUNF]. ğŸ”— Project website: http://africasoils.net/services/data/soil-databases/ Â©ï¸ Data license: Open Database License (â€œODbLâ€) ğŸ“ Unique locations: 1903 ğŸ“‹ Unique complete scans: 3806 ğŸ“ Import steps: AFSIS 3.2.5 CAF.SSL Description: The Central African Soil Spectral Library. MIR scans of some collected based on 1800 samples in Central Africa. ğŸ“• Summerauer, L., Baumann, P., Ramirez-Lopez, L., Barthel, M., Bauters, M., Bukombe, B., Reichenbach, M., Boeckx, P., Kearsley, E., Van Oost, K., Vanlauwe, B., Chiragaga, D., Heri-Kazi, A. B., Moonen, P., Sila, A., Shepherd, K., Bazirake Mujinya, B., Van Ranst, E., Baert, G., Doetterl, S., and Six, J. (2021). The central African soil spectral library: a new soil infrared repository and a geographical prediction analysis, SOIL, 7, 693â€“715, https://doi.org/10.5194/soil-7-693-2021 ğŸ”— Project website: https://github.com/laura-summerauer/ssl-central-africa Â©ï¸ Data license: CC-BY? ğŸ“ Unique locations: ğŸ“‹ Unique complete scans: 1852 ğŸ“ Import steps: CASSL 3.2.6 NEON.SSL Description: The National Ecological Observatory Network (NEON) Soil Spectral Library. Soil samples were sent to KSSL and scanned using standard procedures. ğŸ“• National Ecological Observatory Network, (2021). Data Product DP1.00096.001, Soil physical and chemical properties, Megapit. Provisional data downloaded from https://data.neonscience.org. Battelle, Boulder, CO, USA NEON. / Dangal &amp; Sanderman (2020). Is Standardization Necessary for Sharing of a Large Mid-Infrared Soil Spectral Library? Sensors 20, 6729. https://doi.org/10.3390/s20236729 ğŸ”— Project website: https://www.neonscience.org/samples/soil-archive Â©ï¸ Data license: CC-BY ğŸ“ Unique locations: ğŸ“‹ Unique complete scans: 305 ğŸ“ Import steps: NEON 3.3 Soil spetroscopy organizations National and regional soil spectral laboratories actively processing soil samples and providing soil spectroscopy services, and other organizations and companies producing or using soil spectroscopy data. See also: The Global Soil Laboratory Network (GLOSOLAN) 3.3.1 KSSL ğŸ“› Name: The Charles E. Kellogg Soil Survey Laboratory (KSSL) ğŸ“« Address: USDA-NRCS-NSSC, Federal Building, Room 152, Mail Stop 41/51, 100 Centennial Mall North Lincoln, NE 68508-3866, USA ğŸ”— Organization website: https://www.nrcs.usda.gov/wps/portal/nrcs/detail/soils/contactus/?cid=nrcs142p2_053895#laboratory ğŸ”¬ Types of services: USDA soil laboratory, MIR, VisNIR, 3.4 Soil Spectroscopy software Open source and commercial software used to process soil spectral scans. See also this detailed review of software used for soil spectroscopy. Even more in-depth review of R packages used for soil spectroscopy can be found in Wadoux et al. (2021). 3.4.1 asdreader ğŸ“› Name: asdreader ğŸ’¼ Specialty: Reading ASD Binary Files in R ğŸ’» Programming language: R project ğŸ”— Homepage: https://github.com/pierreroudier/asdreader ğŸ“• Roudier, P. (2020). asdreader: reading ASD binary files in R. R package version 0.1-3 CRAN. Â©ï¸ License: GPL ğŸ“§ Maintainer: Pierre Roudier 3.4.2 prospectr ğŸ“› Name: prospectr ğŸ’¼ Specialty: Signal processing, Resampling ğŸ’» Programming language: R project ğŸ”— Homepage: https://github.com/l-ramirez-lopez/prospectr ğŸ“• Stevens, A., &amp; Ramirez-Lopez, L. (2014). An introduction to the prospectr package. R Package Vignette, Report No.: R Package Version 0.1, 3. Â©ï¸ License: MIT + file LICENSE ğŸ“§ Maintainer: Leornardo Ramirez-Lopez 3.4.3 simplerspec ğŸ“› Name: simplerspec ğŸ’¼ Specialty: Soil and plant spectroscopic model building and prediction ğŸ’» Programming language: R project ğŸ”— Homepage: https://philipp-baumann.github.io/simplerspec ğŸ“• Baumann, P. (2020). simplerspec: Soil and plant spectroscopic model building and prediction. Packages R CRAN. Â©ï¸ License: GNU General Public License v3.0 ğŸ“§ Maintainer: Philipp Baumann References "],["database.html", "4 Database 4.1 Sites table 4.2 Soillab table 4.3 MIR scans table 4.4 VisNIR scans table 4.5 Harmonization rules", " 4 Database 4.1 Sites table Observations and measurements at site. For the site table please use (at least) the following columns. 4.1.1 id.layer_uuid_c Unique layer ID: Should be best generated using some UUID generator tool; example: id.layer_uuid_c = '672d1fd6-b186-11eb-8a61-7446a0925130' 4.1.2 id.location_olc_c Unique Open Location Codes: ID which identifies the site location; example: id.location_olc_c = '84MVX5FH+PJ' We recommend rounding the latitude and longitude coordinates to 6 decimal places. 4.1.3 observation.ogc.schema.title_ogc_txt Observation OGC schema title; example: observation.ogc.schema.title_ogc_txt = 'Open Soil Spectral Library Schema' 4.1.4 observation.ogc.schema_idn_url Observation OGC schema URL; example: observation.ogc.schema_idn_url = 'https://github.com/soilspectroscopy/' 4.1.5 observation.date.begin_iso.8601_yyyy.mm.dd Observation date begin (ISO8601); example: observation.date.begin_iso.8601_yyyy.mm.dd = '2000.02.10' 4.1.6 observation.date.end_iso.8601_yyyy.mm.dd Observation date end (ISO8601); example: observation.date.end_iso.8601_yyyy.mm.dd = '2000.02.10' 4.1.7 location.address_utf8_txt Location address as Street and number, Local postcode, Town, County, State; example: location.address_utf8_txt = '' 4.1.8 location.country_iso.3166_c Country(ies) the data was/were collected (ISO3166); example: location.country_iso.3166_c = 'USA' 4.1.9 location.method_any_c Location method e.g.Â GPS; example: location.method_any_c = 'GPS' 4.1.10 surveyor.title_utf8_txt Field surveyor title or organization; example: surveyor.title_utf8_txt = 'USDA Natural Resource Conservation Service (NRCS) staff' 4.1.11 surveyor.contact_ietf_email Field surveyor contact email; example: surveyor.contact_ietf_email = 'support@usda.gov' 4.1.12 surveyor.address_utf8_txt Field surveyor address as Street and number, Local postcode, Town, County, State; example: surveyor.address_utf8_txt = 'USDA-NRCS-NSSC, Federal Building, Room 152, Mail Stop, 100 Centennial Mall North, Lincoln, NE' 4.1.13 longitude_wgs84_dd Site WGS84 longitude coordinate; example: longitude_wgs84_dd = '-122.8208847' 4.1.14 latitude_wgs84_dd Site WGS84 latitude coordinate; example: latitude_wgs84_dd = '43.9742584' 4.1.15 location.error_any_m Approximate location error (for GPS coordinates use 30 m); example: location.error_any_m = '30' 4.1.16 dataset.title_utf8_txt Title of the dataset; example: dataset.title_utf8_txt = 'Kellog's lab SSL' 4.1.17 dataset.owner_utf8_txt Name of organization that is the dataset owner; 4.1.18 dataset.code_ascii_txt Code identification of the dataset; example: dataset.code_ascii_txt = 'KSSL' 4.1.19 dataset.address_idn_url The URL address of the dataset web page; example: dataset.address_idn_url = 'https://ncsslabdatamart.sc.egov.usda.gov/' 4.1.20 dataset.license.title_ascii_txt Data license title for the dataset; example: dataset.license.title_ascii_txt = 'CC-0' 4.1.21 dataset.license.address_idn_url Data license URL for the dataset; example: dataset.license.address_idn_url = 'https://creativecommons.org/share-your-work/public-domain/cc0/' 4.1.22 dataset.doi_idf_c International DOI foundation code for the corresponding dataset version; example: dataset.doi_idf_c = '10.2136/sssaj2019.06.0205' 4.1.23 dataset.contact.name_utf8_txt Person responsible for the dataset; example: dataset.contact.name_utf8_txt = 'Firstname Lastname' 4.1.24 dataset.contact.email_ietf_email Email contact of the person responsible for the dataset; example: dataset.contact.email_ietf_email = 'support@usda.gov' 4.1.25 id.dataset.site_ascii_c Local dataset ID of the site; example: id.dataset.site_ascii_c = '603' 4.1.26 id.user.site_ascii_c Local user assigned ID of the site; example: id.user.site_ascii_c = '01-DRJ-01' 4.1.27 id.project_ascii_c Unique project code; example: id.project_ascii_c = 'TEX18' 4.1.28 pedon.taxa_usda_c Soil classification based on the USDA Keys to Soil Taxonomy; example: pedon.taxa_usda_c = 'Mollisols_Ustolls_Haplustolls'. Complete list of possible great groups is available here. 4.2 Soillab table 4.2.1 id.layer_uuid_c Unique site ID generated using some UUID generator tool; example: id.site_uuid_c = '672d1fd6-b186-11eb-8a61-7446a0925130' This ID links with the Sites table. 4.2.2 id.layer_local_c Local original layer ID; example: id.site_uuid_c = '456002' This ID links with the Sites table. 4.2.3 sample.doi_idf_c Unique DOI that can be used when citing the dataset; example: sample.doi_idf_c = '10.3390/s20236729' 4.2.4 layer.sequence_usda_uint16 Layer sequence number based on the USDA system; example: layer.sequence_usda_uint16 = '1' 4.2.5 layer.type_usda_c Layer type based on the USDA system; example: layer.type_usda_c = 'horizon' 4.2.6 layer.field.label_any_c Layer field label used e.g.Â for soil samples; example: layer.field.label_any_c = 'S00OR-039-001-2' 4.2.7 layer.upper.depth_usda_cm Layer upper depth in cm; example: layer.upper.depth_usda_cm = '13' 4.2.8 layer.lower.depth_usda_cm Layer lower depth in cm; example: layer.lower.depth_usda_cm = '36' 4.2.9 horizon.designation_usda_c Layer horizon designation based on the USDA system; example: horizon.designation_usda_c = 'A2' 4.2.10 horizon.designation.discontinuity_usda_c Layer horizon designation discontinuity based on the USDA system; example: horizon.designation.discontinuity_usda_c = '' 4.2.11 layer.structure.type_usda_c Layer horizon structure type based on the USDA system; example: layer.structure.type_usda_c = '' 4.2.12 layer.structure.grade_usda_c Layer horizon structure grade based on the USDA system; example: layer.structure.grade_usda_c = '' 4.2.13 layer.texture_usda_c Layer field-estimated texture-by-hand class based on the USDA system; example: layer.texture_usda_c = 'Gravelly Clay' To estimate the field texture-by-hand please follow these guidelines. 4.2.14 agg.stb_usda.1b1_wpct Aggregate stability; description: aggstb_usda.1b1_wpct = Aggregate stability is the weight percent of 0.5mm - 2mm aggregates remaining after wet sieving. 4.2.15 al.dith_usda.4g1_wpct Aluminum, dithionite-citrate extractable; description: al.dith_usda.4g1_wpct = Dithionite citrate extractable aluminum is an indicator of the amount of aluminum substituted for iron in iron oxides. It does not necessarily represent total pedogenic Al. 4.2.16 al.kcl_usda.4b3_cmolkg Aluminum, KCl extractable; description: al.kcl_usda.4b3_cmolkg = KCl extractable aluminum approximates the exchangeable Al, and is a measure of the active acidity present in soils with a 1:1 water pH less than 5.5. It relates to the immediate lime requirement and the CEC of the soil. ğŸ†” al.kcl_usda.4b3_cmolkg ğŸ“š Measurement unit: cmol/kg ğŸ”¬ Laboratory method: KCl extractable ğŸ“– Scientific reference: Thomas (1982) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;al.kcl_usda.4b3_cmolkg&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;ExAl in cmol/kg&quot;, xlab=&quot;depth in cm&quot;) Figure 4.1: Soil-depth histogram for Aluminum, KCl extractable in cmol/kg. Figure 4.2: Aluminum, KCl extractable in cmol/kg histograms. 4.2.17 al.ox_usda.4g2_wpct Aluminum, ammonium oxalate extractable; description: al.ox_usda.4g2_wpct = Ammonium oxalate extractable aluminum is an estimate of the total pedogenic Al, much of which may be in noncrystalline materials or complexed by organic matter. It is reported as gravimetric percent on a &lt;2 mm base. 4.2.18 al.pyp_usda.4g3_wpct Aluminum, sodium pyrophosphate extractable; description: al.pyp_usda.4g3_wpct = Sodium pyrophosphate extractable aluminum is the fraction extracted by 0.1M sodium pyrophosphate. It was originally considered the portion associated with organic compounds, although subsequent evidence indicates other forms are also removed. 4.2.19 alsat_usda.4b4_wpct Aluminum saturation; description: alsat_usda.4b4_wpct = Aluminum saturation is calculated by (AL_KCL/(Sum of bases))*100. It provides some inference of potential Al toxicity problems, although many other factors influence Al toxicity. 4.2.20 bd.clod_usda.3b1_gcm3 Bulk density clod, &lt;2 mm fraction, 1/3 bar; description: bd.clod_usda.3b1_gcm3 = Bulk density, &lt;2 mm fraction, 1/3 bar is the weight per unit volume of the &lt;2 mm fraction, with volume being measured after equilibration at 1/3 bar water tension. It is reported as grams per cubic centimeter on a &lt;2 mm base. 4.2.21 bd.core_iso.11272.2017_gcm3 Dry bulk density based on ISO 11272:2017(en) Soil quality â€” Determination of dry bulk density. 4.2.22 bd.od_usda.3b2_gcm3 Bulk density fine earth, Oven-Dry, &lt;2 mm fraction; description: bd.od_usda.3b4_gcm3 = Bulk density, &lt;2mm fraction, field moist is the weight per unit volume of the &lt;2 mm fraction, with volume measured at field (sampling) moisture. Measurements are made on known volume cores. It is reported as grams per cubic centimeter, &lt;2 mm base. ğŸ†” bd.od_usda.3b2_gcm3 ğŸ“š Measurement unit: g/cm3 ğŸ”¬ Laboratory method: Oven-Dry ğŸ“– Scientific reference: Grossman and Reinsch (2002) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;bd.od_usda.3b2_gcm3&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;BD g/cm3&quot;, xlab=&quot;depth in cm&quot;) Figure 4.3: Soil-depth histogram for Bulk density in g/cm3. Figure 4.4: Bulk density in g/cm3 percent histograms. 4.2.23 bsat_usda.4b4_wpct Base saturation, NH4OAc, pH7; description: bsat_usda.4b4_wpct = NH4OAC base saturation (pH 7.0) is calculated by (BASE_SUM/CEC_NH4)*100. ğŸ†” bsat_usda.4b4_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Displacement after Washing, NH4OAC, pH 7 / Atomic Absorption Spectrophotometer ğŸ“– Scientific reference: Thomas (1982) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;bsat_usda.4b4_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;BS in wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.5: Soil-depth histogram for Base saturation in wpct. Figure 4.6: Base saturation in weight percent histograms. 4.2.24 c.tot_iso.10694.1995_wpct Total soil carbon based on ISO 10694:1995(en) Soil quality â€” Determination of organic and total carbon after dry combustion (elementary analysis). 4.2.25 c.tot_usda.4h2_wpct Total carbon; description: c.tot_usda.4h2_wpct = Total carbon is a measure of all organic and inorganic carbon, including that found in carbonate minerals. ğŸ†” c.tot_usda.4h2_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Walkley-Black ğŸ“– Scientific reference: Nelson and Sommers (1983) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;c.tot_usda.4h2_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;SOC wprm&quot;, xlab=&quot;depth in cm&quot;) Figure 4.7: Soil-depth histogram for total carbon in wpct. Figure 4.8: Total carbon in weight percent histograms. 4.2.26 ca.ext_usda.4b1_cmolkg Calcium, NH4OAc Extractable, 2M KCl displacement; description: ca.ext_usda.4b1_cmolkg = NH4OAC extractable calcium is the fraction removed by pH 7.0 NH4OAC. It is assumed to represent the exchangeable Ca. It is reported as meq per 100 grams on a &lt;2 mm base. It is not reported for samples containing carbonates or soluble salts. ğŸ†” ca.ext_usda.4b1_cmolkg ğŸ“š Measurement unit: cmol/kg ğŸ”¬ Laboratory method: Displacement after Washing, NH4OAC, pH 7 / Atomic Absorption Spectrophotometer ğŸ“– Scientific reference: Thomas (1982) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;ca.ext_usda.4b1_cmolkg&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;ExCa cmol/kg&quot;, xlab=&quot;depth in cm&quot;) Figure 4.9: Soil-depth histogram for Calcium, NH4OAc Extractable in cmol/kg. Figure 4.10: Calcium, NH4OAc Extractable in cmol/kg histograms. 4.2.27 caco3_iso.10693.1995_vpct Total carbonate in the &lt;2 mm fraction (measured by CO2 evolution after acid treatment) based on ISO 10693:1995 Soil quality â€” Determination of carbonate content â€” Volumetric method. 4.2.28 caco3_usda.4e1_wpct Calcium carbonate content; description: caco3_usda.4e1_wpct = Carbonate in the &lt;2 mm fraction is measured by CO2 evolution after acid treatment. It is reported as gravimetric percent CaCO3 on a &lt;2 mm base, even though carbonates of Mg, Na, K, and Fe may be present and react with the acid. ğŸ†” caco3_usda.4e1_wpct ğŸ“š Measurement unit: weight percentage ğŸ”¬ Laboratory method: 3 N HCl Treatment ğŸ“– Scientific reference: Loeppert, Suarez, and others (1996) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;caco3_usda.4e1_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;CaCO3 wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.11: Soil-depth histogram for CaCO3 in wpct. Figure 4.12: Organic carbon in weight percent histograms. 4.2.29 caco3.pres_usda.1b1_c Effervescence, 1N HCl; description: caco3.pres_usda.1b1_c = The visual effervescence of the prepared sample when treated with 1N HCl. 4.2.30 cec.ext_iso.13536.1995_cmolkg Cation Exchange Capacity based on ISO 13536:1995(en) Soil quality â€” Determination of the potential cation exchange capacity and exchangeable cations using barium chloride solution buffered at pH = 8.1. 4.2.31 cec.ext_usda.4b1_cmolkg Cation Exchange Capacity (CEC), NH4OAc, pH 7.0, 2M KCl displacement; description: cec.ext_usda.4b1_cmolkg = CEC by NH4OAC is the Cation Exchange Capacity of the sample, determined by 1N NH4OAC in a system highly buffered at pH 7.0 The NH4 is displaced by 2M KCl to obtain a solution without solids. It is reported as meq per 100 grams sample, on a &lt;2 mm base. ğŸ†” cec.ext_usda.4b1_cmolkg ğŸ“š Measurement unit: cmol/kg ğŸ”¬ Laboratory method: Displacement after Washing, NH4OAC, pH 7 / Atomic Absorption Spectrophotometer ğŸ“– Scientific reference: Thomas (1982) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;cec.ext_usda.4b1_cmolkg&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;CEC in cmol/kg&quot;, xlab=&quot;depth in cm&quot;) Figure 4.13: Soil-depth histogram for CEC in cmol/kg. Figure 4.14: CEC in cmol/kg histograms. 4.2.32 clay.tot_iso.11277.2020_wpct Total clay (&lt;0.002 mm particle diameter) based on ISO 11277:2020(en) Soil quality â€” Determination of particle size distribution in mineral soil material â€” Method by sieving and sedimentation. 4.2.33 clay.tot_usda.3a1_wpct Total clay content; description: clay.tot_usda.3a1_wpct = Total clay is the soil separate with &lt;0.002 mm particle diameter. Clay size carbonate is included. Total clay is reported as a weight percent of the &lt;2 mm fraction. ğŸ†” code clay.tot_usda.3a1_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Particle-Size Distribution Analysis using Pipette ğŸ“– Scientific reference: USDA NRCS (2019) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;clay.tot_usda.3a1_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, ylab=&quot;Clay in wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.15: Soil-depth histogram for total clay in wpct. Figure 4.16: Total clay content in weight percent histograms. 4.2.34 ec.ext.sat_usda.4f2_dsm Electrical Conductivity, Saturation Extract; description: ec.ext.sat_usda.4f2_dsm = Electrical Conductivity, Saturation Extract 4.2.35 ec.w_usda.4f1_dsm Electrical Conductivity, Predict, 1:2 (w/w); description: ec.w_usda.4f1_dsm = The salt predict electrical conductivity is used to determine whether additional salt analyses are needed, and to estimate appropriate dilution ratios for additional tests. It is reported as mmhos per centimeter of a 1:2 soil:water mixture by weight. ğŸ†” ec.w_usda.4f1_dsm ğŸ“š Measurement unit: dS/m ğŸ”¬ Laboratory method: ?? ğŸ“– Scientific reference: Nelson and Sommers (1983) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;ec.w_usda.4f1_dsm&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;EC in dS/m&quot;, xlab=&quot;depth in cm&quot;) Figure 4.17: Soil-depth histogram for Electrical Conductivity in dS/m. Figure 4.18: Electrical Conductivity in dS/m histograms. 4.2.36 ecec_usda.4b4_cmolkg Effective Cation Exchange Capacity; description: ecec_usda.4b4_cmolkg = Sum of bases + AL_KCL the effective cation exchange capacity is calculated by BASE_SUM+AL_KCL. It is not calculated if soluble salts are present. It is reported as meq per 100 grams on a &lt;2 mm base. ğŸ†” ecec_usda.4b4_cmolkg ğŸ“š Measurement unit: cmol/kg ğŸ”¬ Laboratory method: Displacement after Washing, NH4OAC, pH 7 / Atomic Absorption Spectrophotometer ğŸ“– Scientific reference: Sumner and Miller (1996) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;ecec_usda.4b4_cmolkg&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;ECEC in cmol/kg&quot;, xlab=&quot;depth in cm&quot;) Figure 4.19: Soil-depth histogram for ECEC in cmol/kg. Figure 4.20: ECEC in cmol/kg histograms. 4.2.37 fe.dith_usda.4g1_wpct Iron, dithionite-citrate extractable; description: fe.dith_usda.4g1_wpct = Dithionite citrate extractable iron is considered a general measure of total pedogenic iron. It provides inferences on the amount of iron in various forms, P fixing potential, aggregate stability, and degree of weathering. Reported as grav % on &lt;2 mm. 4.2.38 fe.ox_usda.4g2_wpct Iron, ammonium oxalate extractable; description: fe.ox_usda.4g2_wpct = Ammonium oxalate extractable iron is considered a measure of the noncrystalline Fe in soils. It provides some inferences of the amount of Fe in various forms. It is reported as gravimetric % on a &lt;2 mm base. 4.2.39 fe.pyp_usda.4g3_wpct Iron, sodium pyrophosphate extractable; description: fe.pyp_usda.4g3_wpct = Sodium pyrophosphate extractable iron is assumed to be the fraction associated with organic complexes. It is reported as gravimetric percent on a &lt;2 mm base. 4.2.40 gyp_usda.4e2_wpct Corrected Gypsum, &lt; 2mm; description: gyp_usda.4e2_wpct = Corrected Gypsum (Uncorrected Gypsum * Factor) ğŸ†” gyp_usda.4e2_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Aqueous Extraction, Electrical Conductivity ğŸ“– Scientific reference: Elrashidi et al. (2007) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;gyp_usda.4e2_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;Gypsum in wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.21: Soil-depth histogram for Exchangeable sodium percentage. Figure 4.22: Exchangeable sodium percentage histograms. 4.2.41 humus_usda.4h2_wpct Organic matter or humus content; description: humus_usda.4h2_wpct = Total organic matter in weight percent (dag/kg) lost on ignition (400Â°C) (LOI). Values for organic C can be determined by using the â€œVan Bemmelen factorâ€ (1/1.724 = 0.58) to calculate organic carbon. 4.2.42 k.ext_usda.4b1_cmolkg Potassium, NH4OAc Extractable, 2M KCl displacement; description: k.ext_usda.4b1_cmolkg = NH4OAC extractable potassium is the fraction removed by pH 7.0 NH4OAC. It is assumed to represent the exchangeable K. It is reported as meq per 100 grams on a &lt;2 mm base. ğŸ†” k.ext_usda.4b1_cmolkg ğŸ“š Measurement unit: cmol/kg ğŸ”¬ Laboratory method: Displacement after Washing, NH4OAC, pH 7 / Atomic Absorption Spectrophotometer ğŸ“– Scientific reference: Thomas (1982) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;k.ext_usda.4b1_cmolkg&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;ExK in cmol/kg&quot;, xlab=&quot;depth in cm&quot;) Figure 4.23: Soil-depth histogram for Potassium, NH4OAc Extractable in cmol/kg. Figure 4.24: Potassium, NH4OAc Extractable in cmol/kg histograms. 4.2.43 mg.ext_usda.4b1_cmolkg Magnesium, NH4OAc Extractable, 2M KCl displacement; description: mg.ext_usda.4b1_cmolkg = NH4OAC extractable magnesium is the fraction removed by pH 7.0 NH4OAC. It is assumed to represent the exchangeable Mg if MgCO3 is not present. It is reported as meq per 100 grams on a &lt;2 mm base. ğŸ†” mg.ext_usda.4b1_cmolkg ğŸ“š Measurement unit: cmol/kg ğŸ”¬ Laboratory method: Displacement after Washing, NH4OAC, pH 7 / Atomic Absorption Spectrophotometer ğŸ“– Scientific reference: Thomas (1982) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;mg.ext_usda.4b1_cmolkg&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;ExMg in cmol/kg&quot;, xlab=&quot;depth in cm&quot;) Figure 4.25: Soil-depth histogram for Magnesium, NH4OAc Extractable in cmol/kg. Figure 4.26: Magnesium, NH4OAc Extractable in cmol/kg histograms. 4.2.44 n.tot_iso.13878.1998_wpct Total nitrogen based on ISO 13878:1998(en) Soil quality â€” Determination of total nitrogen content by dry combustion (â€œelemental analysisâ€). 4.2.45 n.tot_usda.4h2_wpct Total nitrogen; description: n.tot_usda.4h2_wpct = Total nitrogen is a measure of all organic and inorganic nitrogen, including that found in nitrogen minerals. ğŸ†” n.tot_usda.4h2_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Dry oxidation (combustion) procedure ğŸ“– Scientific reference: Bremner (1996) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;n.tot_usda.4h2_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;N wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.27: Soil-depth histogram for total N in wpct. Figure 4.28: Total N in weight percent histograms. 4.2.46 na.exch_usda.4f3_wpct Exchangeable sodium percentage saturated; description: na.exch_usda.4f3_wpct = This is the exchangeable sodium percentage (ESP), reported on a &lt;2 mm base. If salts are present, ESP has been corrected for the water soluble Na. 4.2.47 na.ext_usda.4b1_cmolkg Sodium, NH4OAc Extractable, 2M KCl displacement; description: na.ext_usda.4b1_cmolkg = NH4OAC extractable sodium is the fraction removed by pH 7.0 NH4OAC. It is assumed to represent the exchangeable Na. It is reported as meq per 100 grams on a &lt;2 mm base. ğŸ†” na.ext_usda.4b1_cmolkg ğŸ“š Measurement unit: cmol/kg ğŸ”¬ Laboratory method: Displacement after Washing, NH4OAC, pH 7 / Atomic Absorption Spectrophotometer ğŸ“– Scientific reference: Thomas (1982) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;na.ext_usda.4b1_cmolkg&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;ExNa in cmol/kg&quot;, xlab=&quot;depth in cm&quot;) Figure 4.29: Soil-depth histogram for Sodium, NH4OAc Extractable in cmol/kg. Figure 4.30: Sodium, NH4OAc Extractable histograms. 4.2.48 oc_iso.10694.1995_wpct Organic carbon based on ISO 10694:1995(en) Soil quality â€” Determination of organic and total carbon after dry combustion (elementary analysis). 4.2.49 oc_iso.17184.2014_wpct Organic carbon based on ISO 17184:2014(en) Soil quality â€” Determination of carbon and nitrogen by near-infrared spectrometry (NIRS). 4.2.50 oc_usda.4h2_wpct Organic carbon based on dry combustion in weight percent (dag/kg); description: oc_usda.4h2_wpct = CMS analyte equivalent to the Walkley-Black organic C method. Organic carbon is a measure of all organic forms of carbon in the soil, including organic carbon within minerals. 4.2.51 oc_usda.calc_wpct Organic carbon in weight percent (dag/kg); description: oc_usda.calc_wpct = Estimated (calculated) Organic Carbon based on Total C minus the inorganic carbon, GP prep. ğŸ†” oc_usda.calc_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Walkley-Black organic C method ğŸ“– Scientific reference: Nelson and Sommers (1983) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;oc_usda.calc_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;SOC wprm&quot;, xlab=&quot;depth in cm&quot;) Figure 4.31: Soil-depth histogram for soil organic carbon in wpct. Figure 4.32: Organic carbon in weight percent histograms. 4.2.52 p.ext_usda.4d6_mgkg Phosphorus, Mehlich3 extractable; description: p.ext_usda.4d6_mgkg = The phosphorus extracted by the Mehlich III solution. 4.2.53 p.olsn_usda.4d5_mgkg Phosphorus, Olsen extractable; description: p.olsn_usda.4d5_mgkg = The Olsen extractable phosphorus is used as an indicator of available phosphorus in calcareous soil materials (pH &gt;6). 4.2.54 ph.cacl2_iso.10390.1994_index Soil pH 1:2 0.01-M calcium choride based on ISO 10390:1994 Soil quality â€” Determination of pH. 4.2.55 ph.cacl2_usda.4c1_index Soil pH 1:2 0.01-M calcium chloride; description: ph.cacl2_usda.4c1_index = The pH, 1:2 soil-CaCl2 is the pH of a sample measured in 0.01M CaCl2 at a 1:2 soil:solution ratio. ğŸ†” ph.cacl2_usda.4c1_index ğŸ“š Measurement unit: index ğŸ”¬ Laboratory method: Soil suspension combination pH-Reference Electrode ğŸ“– Scientific reference: McLean (1983) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;ph.cacl2_usda.4c1_index&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;pH CaCl&quot;, xlab=&quot;depth in cm&quot;) Figure 4.33: Soil-depth histogram for Soil pH 1:2 0.01-M calcium chloride. Figure 4.34: Soil pH 1:2 0.01-M calcium chloride histograms. 4.2.56 ph.h2o_usda.4c1_index Soil pH 1:1 water; description: ph.h2o_usda.4c1_index = The pH, 1:1 soil-water suspension is the pH of a sample measured in distilled water at a 1:1 soil:solution ratio. If wider ratios increase the pH, salts are indicated. ğŸ†” ph.h2o_usda.4c1_index ğŸ“š Measurement unit: index ğŸ”¬ Laboratory method: Soil suspension combination pH-Reference Electrode ğŸ“– Scientific reference: McLean (1983) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;ph.h2o_usda.4c1_index&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, ylab=&quot;Soil pH&quot;, xlab=&quot;depth in cm&quot;) Figure 4.35: Soil-depth histogram for soil pH. Figure 4.36: Soil pH 1:1 water histograms. 4.2.57 s.tot_usda.4h2_wpct Total sulfur; description: s.tot_usda.4h2_wpct = Total sulfur is a measure of all organic and inorganic sulfur, including that found in sulfide minerals. 4.2.58 sand.tot_iso.11277.2020_wpct Total laboratory-estimated sand (0.05 to 2.0 mm particle diameter) based on ISO 11277:2020(en) Soil quality â€” Determination of particle size distribution in mineral soil material â€” Method by sieving and sedimentation. 4.2.59 sand.tot_usda.3a1_wpct Total sand content; description: sand.tot_usda.3a1_wpct = Total sand is the soil separate with 0.05 to 2.0 mm particle diameter. It is reported as a gravimetric percent on a &lt;2 mm base. H prep. ğŸ†” code sand.tot_usda.3a1_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Particle-Size Distribution Analysis using Pipette ğŸ“– Scientific reference: USDA NRCS (2019) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;sand.tot_usda.3a1_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, ylab=&quot;Sand in wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.37: Soil-depth histogram for total sand content in wpct. Figure 4.38: Total sand content in weight percent histograms. 4.2.60 silt.tot_iso.11277.2020_wpct Total laboratory-estimated silt (0.002 to 0.05 mm particle size) based on ISO 11277:2020(en) Soil quality â€” Determination of particle size distribution in mineral soil material â€” Method by sieving and sedimentation. 4.2.61 silt.tot_usda.3a1_wpct Total silt content; description: silt.tot_usda.3a1_wpct = Total silt is the soil separate with 0.002 to 0.05 mm particle size. It is reported as a gravimetric percent on a &lt;2 mm base. ğŸ†” code silt.tot_usda.3a1_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Particle-Size Distribution Analysis using Pipette ğŸ“– Scientific reference: USDA NRCS (2019) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;silt.tot_usda.3a1_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, ylab=&quot;Silt in wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.39: Soil-depth histogram for total silt content in wpct. Figure 4.40: Total silt content in weight percent histograms. 4.2.62 sodium.ads.ratio_usda.4f3_index Sodium adsorption ratio; description: sodium.ads.ratio_usda.4f3_index = The sodium absorption ratio is calculated by NA_SATX/sqrt((CA_SATX+MG_SATX)/2). It is approximately equal to the exchangeable sodium percentage. 4.2.63 wpg2_iso.11277.2020_wpct The gravimetric percentage of coarse fragments greater than 2 mm diameter particles reported on a whole soil base based on ISO 11277:2020(en) Soil quality â€” Determination of particle size distribution in mineral soil material â€” Method by sieving and sedimentation. 4.2.64 wpg2_usda.3a2_wpct Coarse Fragments, Greater than 2mm; description: wpg2_usda.3a2_wpct = The gravimetric percentage of greater than 2 mm diameter particles reported on a whole soil base. ğŸ†” wpg2_usda.3a2_wpct ğŸ“š Measurement unit: weigth percent ğŸ”¬ Laboratory method: Particle-Size Distribution Analysis by weight estimates ğŸ“– Scientific reference: Grossman and Reinsch (2002), Testing et al. (2006) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;wpg2_usda.3a2_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;WPG2 wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.41: Soil-depth histogram for coarse fragments in wpct. Figure 4.42: Coarse fragments in weight percent histograms. 4.2.65 wr.1500kbar_usda.3c2_wpct Water Retention, 15 Bar, &lt;2mm, Air-dry (Permanent Wilting Point); description: wr.1500kbar_usda.3c2_wpct = 15 bar water on air dry soil is the gravimetric water content of &lt;2 mm air dry samples after equilibration at 15 bars water tension. It is reported on a &lt;2 mm base. The value is influenced by clay %, mineralogy, and organic carbon %. ğŸ†” wr.1500kbar_usda.3c2_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Pressure-Membrane Extraction ğŸ“– Scientific reference: USDA NRCS (2019) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;wr.1500kbar_usda.3c2_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;PWP wprm&quot;, xlab=&quot;depth in cm&quot;) Figure 4.43: Soil-depth histogram for Water Retention at 15 Bar (Permanent Wilting Point) in wpct. Figure 4.44: Organic carbon in weight percent histograms. 4.2.66 wr.33kbar_usda.3c1_wpct Water Retention, 1/3 Bar, &lt;2mm Clod; description: wr.33kbar_usda.3c1_wpct = 1/3 bar water, clods is the gravimetric percent water in natural fabric (clods) after equilibration at 1/3 bar water tension. It is reported on a &lt;2 mm base. ğŸ†” wr.33kbar_usda.3c1_wpct ğŸ“š Measurement unit: weight percent ğŸ”¬ Laboratory method: Pressure-Membrane Extraction ğŸ“– Scientific reference: USDA NRCS (2019) openair::scatterPlot(ossl.yw, x = &quot;depth&quot;, y = &quot;wr.33kbar_usda.3c1_wpct&quot;, method = &quot;hexbin&quot;, col = &quot;increment&quot;, log.x = TRUE, log.y=TRUE, ylab=&quot;FC wpct&quot;, xlab=&quot;depth in cm&quot;) Figure 4.45: Soil-depth histogram for Water Retention at 1/3 Bar (Field Capacity) in wpct. Figure 4.46: Water Retention at 1/3 Bar in weight percent histograms. 4.3 MIR scans table 4.3.1 id.scan_uuid_c Unique scan ID: Should be best generated using some UUID generator tool; example: id.scan_uuid_c = 'a10c95104a1549ad1484426cd1595cdb' 4.3.2 id.scan_local_c Local scan ID of the sample; example: id.scan_local_c = '32987' 4.3.3 id.layer_uuid_c Unique site ID generated using some UUID generator tool; example: id.layer_uuid_c = '147540e129e096fa91700e9db6588354' This ID links with the Sites table. 4.3.4 id.layer_local_c Local original layer ID; example: id.layer_local_c = '456002' This ID links with the Sites table. 4.3.5 model.name_utf8_txt Instrument model name; example: model.name_utf8_txt = 'Bruker Vertex 70 with HTS-XT accessory' 4.3.6 model.code_any_c Instrument model code; example: model.code_any_c = 'Bruker_Vertex_70.HTS.XT' 4.3.7 method.light.source_any_c Laboratory light source type. 4.3.8 method.preparation_any_c Laboratory method preparation for samples. 4.3.9 scan.file_any_c File name of the original scan. 4.3.10 scan.date.begin_iso.8601_yyyy.mm.dd Scan date begin (ISO8601); example: scan.date.begin_iso.8601_yyyy.mm.dd = '2020-11-20' 4.3.11 scan.date.end_iso.8601_yyyy.mm.dd Scan date end (ISO8601); example: scan.date.end_iso.8601_yyyy.mm.dd = '2020-11-20' 4.3.12 scan.license.title_ascii_txt Scan license title; example: scan.license.title_ascii_txt = 'CC-BY' 4.3.13 scan.license.address_idn_url Scan license address; example: scan.license.address_idn_url = 'https://ncsslabdatamart.sc.egov.usda.gov/datause.aspx' 4.3.14 scan.doi_idf_c Unique DOI that can be used when citing the scan; example: scan.doi_idf_c = '' 4.3.15 scan.contact.name_utf8_txt Scan contact name; example: scan.contact.name_utf8_txt = 'Scarlett Murphy' 4.3.16 scan.contact.email_ietf_email Scan contact email; example: scan.contact.email_ietf_email = 'Scarlett.Murphy@usda.gov' 4.3.17 scan_mir.****_abs Absorbance values per band usually ranging between 0â€“3000 (multiplied by 1000). To generate the band names use e.g.: x = paste0(&quot;scan_mir.&quot;, seq(600, 4000, by=2), &quot;_abs&quot;) str(x) ## chr [1:1701] &quot;scan_mir.600_abs&quot; &quot;scan_mir.602_abs&quot; &quot;scan_mir.604_abs&quot; ... 4.4 VisNIR scans table 4.4.1 id.scan_uuid_c Unique scan ID: Should be best generated using some UUID generator tool; example: id.scan_uuid_c = 'a10c95104a1549ad1484426cd1595cdb' 4.4.2 id.scan_local_c Local scan ID of the sample; example: id.scan_local_c = '32987' 4.4.3 id.layer_uuid_c Unique site ID generated using some UUID generator tool; example: id.layer_uuid_c = '147540e129e096fa91700e9db6588354' This ID links with the Sites table. 4.4.4 id.layer_local_c Local original layer ID; example: id.layer_local_c = '456002' This ID links with the Sites table. 4.4.5 model.name_utf8_txt Instrument model name; example: model.name_utf8_txt = 'Bruker Vertex 70 with HTS-XT accessory' 4.4.6 model.code_any_c Instrument model code; example: model.code_any_c = 'Bruker_Vertex_70.HTS.XT' 4.4.7 method.light.source_any_c Laboratory light source type. 4.4.8 method.preparation_any_c Laboratory method preparation for samples. 4.4.9 scan.file_any_c File name of the original scan. 4.4.10 scan.date.begin_iso.8601_yyyy.mm.dd Scan date begin (ISO8601); example: scan.date.begin_iso.8601_yyyy.mm.dd = '2020-11-20' 4.4.11 scan.date.end_iso.8601_yyyy.mm.dd Scan date end (ISO8601); example: scan.date.end_iso.8601_yyyy.mm.dd = '2020-11-20' 4.4.12 scan.license.title_ascii_txt Scan license title; example: scan.license.title_ascii_txt = 'CC-BY' 4.4.13 scan.license.address_idn_url Scan license address; example: scan.license.address_idn_url = 'https://ncsslabdatamart.sc.egov.usda.gov/datause.aspx' 4.4.14 scan.doi_idf_c Unique DOI that can be used when citing the scan; example: scan.doi_idf_c = '' 4.4.15 scan.contact.name_utf8_txt Scan contact name; example: scan.contact.name_utf8_txt = 'Scarlett Murphy' 4.4.16 scan.contact.email_ietf_email Scan contact email; example: scan.contact.email_ietf_email = 'Scarlett.Murphy@usda.gov' 4.4.17 scan_visnir.****_pcnt Reflectance values per band usually ranging between 0â€“100 (multiplied by 100). To generate the band names use e.g.: x = paste0(&quot;scan_visnir.&quot;, seq(350, 2500, by=2), &quot;_pcnt&quot;) str(x) ## chr [1:1076] &quot;scan_visnir.350_pcnt&quot; &quot;scan_visnir.352_pcnt&quot; ... To convert reflectance values to absorbances use: a = seq(0, 3000, by=10) r = 1/exp(a/1000) * 100 plot(data.frame(a,r), type=&quot;l&quot;, xlab=&quot;Absorbance&quot;, ylab=&quot;Reflectance [%]&quot;) 4.5 Harmonization rules The following text includes harmonization / conversion rules recommended in this project. For each conversion rule, a reference and an example are provided to prevent from misusing the rules. The following principle of harmonization are highly recommended: Document (R code) any harmonization / conversion steps. Where possible provide propagated measure of uncertainty. This can further used as weights in the Machine Learning / model building. Any conversion that leads to inducting significant bias (over-/under-estimation of values) should we avoided. Add to the produced dataset metadata that part of data has been harmonized and specify exact method. Disclaimer: use at own risk. See also our general disclaimer. 4.5.1 pH From ph.kcl_usda.4c1_index to ph.h2o_usda.4c1_index based on BÃ¶hner, Blaschke, and Montanarella (2008): ph.kcl = 6.5 ph.h2o = ph.kcl / 0.87 ph.h2o ## [1] 7.471264 From ph.cacl2_usda.4c1_index to ph.h2o_usda.4c1_index based on Miller and Kissel (2010): ph.cacl2 = 6.5 ph.h2o = (ph.cacl2 + 0.973 ) / 1.08 ph.h2o ## [1] 6.919444 4.5.2 Carbon From humus_usda.4h2_wpct to oc_usda.4h2_wpct based on Nelson and Sommers (1983): humus = 4 oc = humus / 1.724 oc ## [1] 2.320186 From humus_usda.4h2_wpct to oc_usda.4h2_wpct based on Jensen et al. (2018): humus = 4; clay = 10 oc1 = 0.513 * humus - (0.047 * clay - 0.00025 * clay^2) oc1 ## [1] 1.607 humus = 4; clay = 20 oc2 = 0.513 * humus - (0.047 * clay - 0.00025 * clay^2) oc2 ## [1] 1.212 4.5.3 Phosphorous 4.5.4 Potassium 4.5.5 Nitrogen 4.5.6 Exchangeable cations and CEC From k.ext extracted by Mehlich-3 (cmol/kg) to ecec.ext_usda.4b1_cmolkg based on Helling, Chesters, and Corey (1964): ph.h2o = 6.5 k.ext = 2 ca.ext = 12 na.ext = 2 mg.ext = 1 ecec.ext = ifelse(ph.h2o &lt; 7.5 &amp; ph.h2o&gt;4, (k.ext + ca.ext + na.ext + mg.ext), NA) ecec.ext ## [1] 17 From oc_usda.4h2_wpct to ecec.ext_usda.4b1_cmolkg based on Helling, Chesters, and Corey (1964): clay.tot = 28 ph.h2o = 6.5 oc = 2 ecec.ext = ((clay.tot*10/100*(30+4.4*ph.h2o))+(oc/100*(-59+51*ph.h2o)))/10 ecec.ext ## [1] 16.953 4.5.7 Texture fractions 4.5.8 Bulk density 4.5.9 Soil biological variables 4.5.10 Soil contaminants References "],["reference-soil-spectroscopy-models.html", "5 Reference soil spectroscopy models 5.1 OSSL global soil spectroscopy callibrarion models 5.2 Using default OSSL models to predict soil properties 5.3 Registering your own model", " 5 Reference soil spectroscopy models The following sections describe steps used to produce OSSL models, which are used in the OSSL calibration service and API. For more in-depth insight of the modeling steps please refer to the ossl-models repository. 5.1 OSSL global soil spectroscopy callibrarion models We have fitted a number of calibration models using OSSL MIR and VisNIR spectra and combination of additional covariates, and which are now publicly available for use under the CC-BY license. For modeling we use the Ensemble Machine Learning framework as implemented in the R mlr programming environment with the following parameters: Regression on first 60 Principal Component Analysis PCâ€™s of the raw spectra; Four base learners: Random Forest, Gradient Boosting, Cubist and Lasso and Elastic-Net Regularized GLM; Ensemble Machine Learning by stacking / meta-learner through 5-fold Cross-Validation; Blocking using 100Ã—100-km spatial grid to avoid possible overfitting; Feature selection and model-parameter fine-tuning using random and sequential backward search; For more details on how were the models fitted refer to: https://github.com/soilspectroscopy/ossl-models. For standard global soil spectral calibration models we use various calibration frameworks including: Using only MIR spectra for calibration. Using only VisNIR spectra for calibration. Using combination of MIR and VisNIR spectra. Using combination of MIR and VisNIR spectra + geographic covariates. The methods 1 &amp; 2 are standard methods described in literature (Wadoux et al. 2021). The methods 3 &amp; 4 are referred to as the â€œMIR-VisNIR fusionâ€ approach (Vohland et al. 2022). The method 4 is the â€œfield-specific calibration approachâ€; we refer to it here as the â€œbundle approachâ€ as we basically use all information available to help produce best predictions of targeted soil properties. Users can choose to opt for one of the multiple calibration models, which also depends on the type of data (VisNIR, MIR, coordinates and depths known yes/no) used of course. The online callibration service (https://engine.soilspectroscopy.org) and the API can be used for predicting values of soil properties for smaller datasets (&lt;1000 rows). Soil spectral scans obtained by different spectroscopic instruments often cannot be modeled or analyzed together i.e.Â they require some kind of calibration (Lei and Sun 2022) before one can fit cross-instrument / cross-dataset calibration models. In the OSSL library we thus use also instrument / dataset code as the indicator variable. The most complex models currently in the OSSL are, thus, one with which users need to define both: Input MIR spectra, Input VisNIR spectra (same samples), Geographical location and soil depth, Instrument code / dataset code; 5.2 Using default OSSL models to predict soil properties OSSL model registry (RDS) S3 file services currently includes large number of prediction models fitted for a list of soil properties. The complete list is available in the file OSSL_models_meta.csv. 5.2.1 Predicting soil properties using MIR spectra For example, to predict soil organic carbon weight percent (oc_usda.calc_wpct) using MIR spectra, we need to load two models (1) principal component model mpca_mir_kssl_v1.rds, (2) mlr model for predicting oc_usda.calc_wpct: source(&#39;./R/ossl_functions.R&#39;) rep = &quot;http://s3.us-east-1.wasabisys.com/soilspectroscopy/ossl_models/&quot; pcm1 = url(paste0(rep, &quot;pca.ossl/mpca_mir_kssl_v1.rds&quot;), &quot;rb&quot;) eml1 = url(paste0(rep, &quot;log..oc_usda.calc_wpct/mir_mlr..eml_kssl_na_v1.rds&quot;), &quot;rb&quot;) ossl.pca.mir = readRDS(pcm1) ossl.model = readRDS(eml1) Note that the models (RDS files) can be between 10 to 200 MB in size, depending on complexity of models and the size of the training data used. The Principal Component Analysis is described in the OSSL models repository. It is a standard way of compressing 1000+ spectral bands before predictive modeling (Chang et al. 2001). We use the first 60 PCA components for further modeling, which is an arbitrary decisions. We can look at the summary of model by typing: summary(ossl.model$learner.model$super.model$learner.model) Residuals: Min 1Q Median 3Q Max -3.1506 -0.0525 0.0181 0.0661 3.2965 Coefficients: Estimate Std. Error t value Pr(&gt;|t|) (Intercept) -0.038545 0.001042 -36.98 &lt;2e-16 *** regr.ranger 0.235387 0.004115 57.20 &lt;2e-16 *** regr.xgboost -0.046506 0.003291 -14.13 &lt;2e-16 *** regr.cvglmnet 0.470197 0.004078 115.30 &lt;2e-16 *** regr.cubist 0.362526 0.003946 91.88 &lt;2e-16 *** --- Signif. codes: 0 â€˜***â€™ 0.001 â€˜**â€™ 0.01 â€˜*â€™ 0.05 â€˜.â€™ 0.1 â€˜ â€™ 1 Residual standard error: 0.1539 on 57400 degrees of freedom Multiple R-squared: 0.9821, Adjusted R-squared: 0.9821 F-statistic: 7.857e+05 on 4 and 57400 DF, p-value: &lt; 2.2e-16 This shows that the model is an ensemble Machine Learning model based on stacking of four individual models: regr.ranger (Random Forest) (Wright and Ziegler 2017), regr.xgboost (Gradient Boosting) (Chen et al. 2015), regr.cvglmnet (Lasso and Elastic-Net Regularized GLM) (Friedman, Hastie, and Tibshirani 2010) and regr.cubist (Cubist) (Kuhn et al. 2012). The RMSE of the model is 0.1539 (R-square = 0.982), based on 5-fold Cross Validation with spatial blocking (global grid with 100 km blocks). Model is based on 57,400 training points. We can take a look at the accuracy plot for this model: Figure 5.1: Accuracy plot for log..oc_usda.calc_wpct/mir_mlr..eml_kssl_na_v1.rds. Next, we load the sample MIR data that we can use to predict soil organic carbon: mir.raw = read.csv(&quot;./sample-data/sample_mir_data.csv&quot;)[,-1] This is a simple table with raw MIR spectral data (absorbances) prepared as a table. The column names contain the wavelengths / MIR channels: dim(mir.raw) ## 20 1765 str(mir.raw[,1:10]) &#39;data.frame&#39;: 20 obs. of 10 variables: $ X4001.656: num 0.411 0.357 0.296 0.152 0.238 ... $ X3999.728: num 0.411 0.357 0.297 0.152 0.239 ... $ X3997.799: num 0.411 0.357 0.297 0.153 0.239 ... $ X3995.871: num 0.411 0.357 0.298 0.153 0.24 ... $ X3993.942: num 0.411 0.357 0.298 0.153 0.24 ... $ X3992.014: num 0.411 0.357 0.299 0.154 0.241 ... $ X3990.085: num 0.411 0.358 0.299 0.154 0.242 ... $ X3988.156: num 0.412 0.358 0.299 0.154 0.242 ... $ X3986.228: num 0.412 0.358 0.3 0.154 0.243 ... $ X3984.3 : num 0.411 0.358 0.3 0.155 0.243 ... We can generate predictions by using: pred.oc = predict.ossl(t.var=&quot;log..oc_usda.calc_wpct&quot;, mir.raw=mir.raw, ossl.model=ossl.model, ylim=c(0,100), ossl.pca.mir=ossl.pca.mir) where ylim=c(0,100) specifies that the prediction values need to be in the range 0 to 100 (values out of these range will be replaced with either 0 or 100). The output of this model consists of four parts: List of 4 $ pred :&#39;data.frame&#39;: 20 obs. of 5 variables: $ x :&#39;data.frame&#39;: 20 obs. of 68 variables: $ model:&#39;data.frame&#39;: 57405 obs. of 5 variables: $ cf : num 0.901 Predictions with back-transformed value and lower and upper prediction intervals (1 std.); Data frame with all covariate layers needed to generate predictions; Summary meta-learner with predicted and observed values; Ratio between variance in predictions produced using base learners and MSE; The predictions are in the format: str(pred.oc$pred) &#39;data.frame&#39;: 20 obs. of 5 variables: $ pred.mean : num -0.0278 0.0463 0.2844 0.7926 -0.0312 ... $ pred.error: num 0.131 0.199 0.111 0.186 0.211 ... $ tpred.mean: num 0 0.0474 0.3289 1.209 0 ... $ lower.1std: num NA NA 0.189 0.834 NA ... $ upper.1std: num 0.109 0.278 0.485 1.66 0.197 ... which means that the predicted oc_usda.calc_wpct for first row is 0 etc. The lower.1std and upper.1std indicate standard prediction interval based on the prediction error derived in the log-space. For higher values of oc_usda.calc_wpct prediction interval gets thus proportionally higher for larger absolute values e.g.Â for row 14 it is between 27% and 34%: #pred.oc$pred[14,] pred.mean pred.error tpred.mean lower.1std upper.1std 14 3.441673 0.1139194 30.23918 26.87566 34.00856 5.2.2 Predicting soil properties using MIR spectra and geographical covariates Next, we can also predict values at new location using calibration model that is field-specific i.e.Â we use MIR spectra in combination with geographic covariates. To predict with such data we also need to load geographical locations for the same MIR scans: new.soil = read.csv(&quot;./sample-data/sample_soilsite_data.csv&quot;) lon = new.soil$longitude.std.decimal.degrees lat = new.soil$latitude.std.decimal.degrees hzn_depth = new.soil$lay_depth_to_top + (new.soil$lay_depth_to_bottom - new.soil$lay_depth_to_top)/2 This now comes with three additional columns lon and lat and soil depth hzn_depth, which is the middle of the top and bottom depth of the soil horizon. To predict with then specify also the additional arguments in the function: eml2 = url(paste0(rep, &quot;log..oc_usda.calc_wpct/mir_mlr..eml_kssl_ll_v1.rds&quot;), &quot;rb&quot;) ossl.model = readRDS(eml2) pred.oc2 = predict.ossl(t.var=&quot;log..oc_usda.calc_wpct&quot;, mir.raw=mir.raw, ossl.model=ossl.model, ylim=c(0,100), ossl.pca.mir=ossl.pca.mir, geo.type=&quot;ll&quot;, lon=lon, lat=lat, hzn_depth=hzn_depth, cog.dir=&quot;/data/WORLDCLIM/&quot;) This type of prediction is somewhat more complex as the function predict.ossl needs also to overlay points (lon and lat) vs some 62 GeoTIFFs (containing WorldClim2.1 layers and MODIS LST layers). In this case the layers are located on a local machine, which significantly speeds up predictions function. We can look at the variable importance table to try to understand how much the additional geographical covariate layers help with producing predictions: xl &lt;- data.frame(importance = ossl.model$learner.model$base.models[[1]]$learner.model$variable.importance) xl$relative_importance = 100*xl$importance/sum(xl$importance) xl = xl[order(xl$importance, decreasing = TRUE),] xl[1:20,] importance relative_importance mir.PC3 5521.13516 44.4468400 mir.PC8 1787.82570 14.3925480 mir.PC1 1329.03090 10.6991085 hzn_depth 1144.91684 9.2169335 mir.PC14 236.53609 1.9041884 mir.PC4 188.32570 1.5160799 mir.PC2 127.37407 1.0254005 mir.PC10 118.35989 0.9528336 mir.PC18 98.84466 0.7957300 clm_lst_mod11a2.aug.day_m_1km_s0..0cm_2000..2017_v1.0 89.33596 0.7191820 mir.PC7 63.62915 0.5122342 mir.PC17 56.04595 0.4511872 mir.PC6 55.01997 0.4429277 mir.PC15 54.79086 0.4410833 mir.PC24 54.56629 0.4392755 mir.PC11 52.60740 0.4235058 clm_lst_mod11a2.feb.day_m_1km_s0..0cm_2000..2017_v1.0 52.41105 0.4219251 mir.PC12 41.14582 0.3312366 mir.PC16 38.54017 0.3102603 mir.PC9 36.17293 0.2912032 here hzn_depth comes as an important covariate and so is lst_mod11a2.aug.day (MOD11A long-term meand daily temperature for August). The original MIR PCA components, however, dominate the prediction model. The global layers (global land mask at 1-km spatial resolution) are listed at https://github.com/soilspectroscopy/ossl-models and are available as a Cloud-service / Cloud-Optimized GeoTIFFs. The process of spatial overlay for new prediction locations, however, can significantly increase prediction time, so something to be aware of. 5.2.3 Predicting soil properties using VisNIR spectra We can also load VisNIR spectra (reflectances) and predict values using the same function: visnir.raw = read.csv(&quot;./sample-data/sample_visnir_data.csv&quot;)[,-c(1:2)] str(visnir.raw[,1:5]) &#39;data.frame&#39;: 20 obs. of 5 variables: $ X350: num 0.0855 0.0677 0.2319 0.3179 0.25 ... $ X351: num 0.0839 0.0666 0.2305 0.3195 0.2504 ... $ X352: num 0.0816 0.0647 0.2277 0.3184 0.2508 ... $ X353: num 0.0811 0.0658 0.2261 0.3134 0.2489 ... $ X354: num 0.082 0.0674 0.2258 0.3124 0.2464 ... We load another PCA model that we prepared using global VisNIR data and the mlr-model that was fitted using VisNIR data: pmc3 = url(paste0(rep, &quot;pca.ossl/mpca_visnir_kssl_v1.rds&quot;), &quot;rb&quot;) eml3 = url(paste0(rep, &quot;log..oc_usda.calc_wpct/visnir_mlr..eml_ossl_na_v1.rds&quot;), &quot;rb&quot;) ossl.pca.visnir = readRDS(pmc3) ossl.model = readRDS(eml3) pred.oc3 = predict.ossl(t.var=&quot;log..oc_usda.calc_wpct&quot;, visnir.raw=visnir.raw, ossl.model=ossl.model, ylim=c(0,100), spc.type = &quot;visnir&quot;, ossl.pca.visnir = ossl.pca.visnir) This models is similar to MIR model, but the accuracy plot indicates that the accuracy might be significantly lower: Figure 5.2: Accuracy plot for log..oc_usda.calc_wpct/visnir_mlr..eml_ossl_na_v1.rds. 5.2.4 Importing soil spectral scans using raw data formats The examples shown above demonstrate prediction results based on using sample MIR and VisNIR data (csv files). If you only have raw spectral scan data such as ASD (PAN Analytics Inc.) and/or OPUS files (Bruker Inc.), you can use various R packages to read files and prepare them for prediction required by OSSL. Consider for example a sample OPUS file from the AfSIS-1 project, which is an original file from the Bruker_Alpha_ZnSe instrument. We can read this file thanks to the simplerspec package by using: mir.x = simplerspec::read_opus_bin_univ(&#39;sample-data/icr056141.0&#39;) ## Extracted spectra data from file: &lt;icr056141.0&gt; names(mir.x) ## [1] &quot;metadata&quot; &quot;spc&quot; &quot;spc_nocomp&quot; ## [4] &quot;sc_sm&quot; &quot;sc_rf&quot; &quot;ig_sm&quot; ## [7] &quot;ig_rf&quot; &quot;wavenumbers&quot; &quot;wavenumbers_sc_sm&quot; ## [10] &quot;wavenumbers_sc_rf&quot; which gives a list of object including spc which are the spectral bands: dim(mir.x[[&quot;spc&quot;]]) ## [1] 1 1715 we can plot the MIR absorbance curve for this scan by using: x = as.numeric(names(mir.x[[&quot;spc&quot;]])) matplot(y=as.vector(t(mir.x[[&quot;spc&quot;]])), x=x, ylim = c(0,3), type = &#39;l&#39;, xlab = &quot;Wavelength&quot;, ylab = &quot;Absorbance&quot; ) Figure 5.3: Spectral absorbances plot using MIR data. This dataset is hence ready to generate predictions using global OSSL models. We can, for example generate prediction of soil pH using the following model: Figure 5.4: Accuracy plot for ph.h2o_usda.4c1_index/mir_mlr..eml_ossl_ll_v1.rds. in this case we need to add also lon-lat coordinates and specify the soil depth: pcm3 = url(paste0(rep, &quot;pca.ossl/mpca_mir_ossl_v1.rds&quot;), &quot;rb&quot;) eml3 = url(paste0(rep, &quot;ph.h2o_usda.4c1_index/mir_mlr..eml_ossl_ll_v1.rds&quot;), &quot;rb&quot;) ossl.pca.mir = readRDS(pcm3) ossl.model = readRDS(eml3) pred.ph1 = predict.ossl(t.var=&quot;ph.h2o_usda.4c1_index&quot;, mir.raw=mir.x[[&quot;spc&quot;]], ossl.model=ossl.model, ossl.pca.mir=ossl.pca.mir, geo.type=&quot;ll&quot;, lon=28.50299833, lat=-13.10194667, hzn_depth=10, cog.dir=&quot;/data/WORLDCLIM/&quot;) which gives us predictions of ph.h2o_usda.4c1_index: pred.ph1$pred pred.mean pred.error lower.1std upper.1std 1 5.21567 1.221916 3.993754 6.437586 Likewise, we can also read the ASD files to generate predictions using VisNIR spectra. Consider for example the sample data from the KSSL VisNIR repository: asd.raw = as.data.frame(asdreader::get_spectra(&quot;sample-data/101453MD01.asd&quot;)) dim(asd.raw) ## [1] 1 2151 x = as.numeric(names(asd.raw)) matplot(y=as.vector(t(asd.raw)), x=x, ylim = c(0,0.7), type = &#39;l&#39;, xlab = &quot;Wavelength&quot;, ylab = &quot;Reflectance&quot; ) Figure 5.5: Spectral reflectance plot using VisNIR data. we can also directly predict ph.h2o_usda.4c1_index by using: pmc3 = url(paste0(rep, &quot;pca.ossl/mpca_visnir_kssl_v1.rds&quot;), &quot;rb&quot;) eml4 = url(paste0(rep, &quot;ph.h2o_usda.4c1_index/visnir_mlr..eml_ossl_na_v1.rds&quot;), &quot;rb&quot;) ossl.pca.visnir = readRDS(pmc3) ossl.model = readRDS(eml4) pred.ph2 = predict.ossl(t.var=&quot;ph.h2o_usda.4c1_index&quot;, visnir.raw=asd.raw, ossl.model=ossl.model, spc.type = &quot;visnir&quot;, ossl.pca.visnir = ossl.pca.visnir) pred.ph2$pred pred.mean pred.error lower.1std upper.1std 1 6.565335 0.4353427 6.129993 7.000678 We are currently building an API that will work directly with standard raw files coming directly from the instruments. This should help make the OSSL more robust and applicable to thousands of requests on a daily basis. Wrongly formatted spectral scans can lead to artifacts and should be used with care. Note that complexity of soil spectral scans remains high, including the file sizes that are difficult to open and read (few thousands of columns) and are often not supported in standard tabular software e.g.Â LibreOffice or similar. We recommend thus to report any issues you might have via our project GitHub so we can all help each other produce more accurate primary soil data. 5.3 Registering your own model If you plan to contribute your own models to the Soil Spectroscopy for Global Good project please follow these steps: We recommend registering and sharing new models via S3 file service system (e.g.Â via OpenGeoHubâ€™s Wasabi.com cloud-service) with RDS files produced using Dockerized solution for full scientific reproducibility. For each model the following metadata need to be supplied: Registered docker image; which should specify in detail: software in use, R package versions etc; DOI of the zenodo repository with a back-up for the data (i.e.Â how to cite your models); URL for accessing the RDS file via S3; We can host your models on our infrastructure at no additional costs. Please contact us and apply for registering your models via soilspectroscopy.org. References "],["references.html", "References", " References "]]
