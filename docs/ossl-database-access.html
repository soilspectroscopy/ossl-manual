<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>4 OSSL database access | Open Soil Spectral Library</title>
<meta name="author" content="Woodwell Climate Research Center, University of Florida, OpenGeoHub and contributors">
<meta name="description" content="You are reading the work-in-progress of the SoilSpec4GG manual. This chapter is currently draft version, a peer-review publication is pending. The OSSL is distributed through Google Could storage...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="4 OSSL database access | Open Soil Spectral Library">
<meta property="og:type" content="book">
<meta property="og:url" content="https://soilspectroscopy.github.io/ossl-manual/ossl-database-access.html">
<meta property="og:image" content="https://soilspectroscopy.github.io/ossl-manual/cover.png">
<meta property="og:description" content="You are reading the work-in-progress of the SoilSpec4GG manual. This chapter is currently draft version, a peer-review publication is pending. The OSSL is distributed through Google Could storage...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="4 OSSL database access | Open Soil Spectral Library">
<meta name="twitter:site" content="@soilspec">
<meta name="twitter:description" content="You are reading the work-in-progress of the SoilSpec4GG manual. This chapter is currently draft version, a peer-review publication is pending. The OSSL is distributed through Google Could storage...">
<meta name="twitter:image" content="https://soilspectroscopy.github.io/ossl-manual/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-06HBX7FM0K"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-06HBX7FM0K');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Open Soil Spectral Library</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About</a></li>
<li><a class="" href="new-to-markdown.html"><span class="header-section-number">1</span> New to markdown</a></li>
<li><a class="" href="soil-spectroscopy-tools-and-users.html"><span class="header-section-number">2</span> Soil spectroscopy tools and users</a></li>
<li><a class="" href="ossl-database-description.html"><span class="header-section-number">3</span> OSSL database description</a></li>
<li><a class="active" href="ossl-database-access.html"><span class="header-section-number">4</span> OSSL database access</a></li>
<li><a class="" href="ossl-reference-models.html"><span class="header-section-number">5</span> OSSL reference models</a></li>
<li><a class="" href="references.html"><span class="header-section-number">6</span> References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/soilspectroscopy/ossl-manual">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="ossl-database-access" class="section level1" number="4">
<h1>
<span class="header-section-number">4</span> OSSL database access<a class="anchor" aria-label="anchor" href="#ossl-database-access"><i class="fas fa-link"></i></a>
</h1>
<div class="rmdnote">
<p>You are reading the work-in-progress of the SoilSpec4GG manual. This chapter is currently draft version, a peer-review publication is pending.</p>
</div>
<p>The OSSL is distributed through Google Could storage bucket, MongoDB, and API. Google Cloud storage bucket hosts static files in two formats: compressed csv (<code>.csv.gz</code>) and <code>qs</code> (from qs R package). The <code>csv.gz</code> is intended to work across different platforms, while <code>qs</code> is the preferred format for being used within R. MongoDB and the API can be used to construct requests to fetch data with specific filters (e.g.Â region, dataset source, etc.), differently from the static files where you need to download the whole database.</p>
<p>In the OSSL, some original dataset share common ids across the VisNIR and MIR range. Some ids, however, have only one range represented (either VisNIR or MIR). OSSL is a tabular database keeping at least one spectral range. A filter must be run before using the database to remove observations with missing spectra for a desired range.</p>
<p>To access an extend global compilation of soil legacy point data sets, refer to <a href="https://github.com/OpenGeoHub/SoilSamples" class="uri">https://github.com/OpenGeoHub/SoilSamples</a> repository.</p>
<div id="google-cloud-storage" class="section level2 unnumbered">
<h2>Google Cloud Storage<a class="anchor" aria-label="anchor" href="#google-cloud-storage"><i class="fas fa-link"></i></a>
</h2>
<p>The datasets in the public bucket can be updated without notice. One can both run the link on a browser to download the files, or provide the URLs in a programming language to automatically fecth them.</p>
<p>Use the following URLs to access the whole database levels:</p>
<pre><code>## Compressed csv
https://storage.googleapis.com/soilspec4gg-public/ossl_all_L0_v1.2.csv.gz
https://storage.googleapis.com/soilspec4gg-public/ossl_all_L1_v1.2.csv.gz

## qs format (preferred on R)
https://storage.googleapis.com/soilspec4gg-public/ossl_all_L0_v1.2.qs
https://storage.googleapis.com/soilspec4gg-public/ossl_all_L1_v1.2.qs</code></pre>
<p>Use these alternative URLs to access the OSSL as separate files:</p>
<pre><code>## Compressed csv
https://storage.googleapis.com/soilspec4gg-public/ossl_soilsite_L0_v1.2.csv.gz
https://storage.googleapis.com/soilspec4gg-public/ossl_soillab_L0_v1.2.csv.gz
https://storage.googleapis.com/soilspec4gg-public/ossl_soillab_L1_v1.2.csv.gz
https://storage.googleapis.com/soilspec4gg-public/ossl_mir_L0_v1.2.csv.gz
https://storage.googleapis.com/soilspec4gg-public/ossl_visnir_L0_v1.2.csv.gz
## qs format (preferred on R)
https://storage.googleapis.com/soilspec4gg-public/ossl_soilsite_L0_v1.2.qs
https://storage.googleapis.com/soilspec4gg-public/ossl_soillab_L0_v1.2.qs
https://storage.googleapis.com/soilspec4gg-public/ossl_soillab_L1_v1.2.qs
https://storage.googleapis.com/soilspec4gg-public/ossl_mir_L0_v1.2.qs
https://storage.googleapis.com/soilspec4gg-public/ossl_visnir_L0_v1.2.qs</code></pre>
<p>Example with R. Use <code>dataset.code_ascii_txt</code> and <code>id.layer_uuid_txt.</code> as joining columns:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org">"tidyverse"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/jeroen/curl">"curl"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/traversc/qs">"qs"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Separate files</span></span>
<span><span class="va">soil</span> <span class="op">&lt;-</span>  <span class="st">"https://storage.googleapis.com/soilspec4gg-public/ossl_soillab_L1_v1.2.qs"</span></span>
<span><span class="va">soil</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/curl/man/curl_fetch.html">curl_fetch_memory</a></span><span class="op">(</span><span class="va">soil</span><span class="op">)</span></span>
<span><span class="va">soil</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/qs/man/qdeserialize.html">qdeserialize</a></span><span class="op">(</span><span class="va">soil</span><span class="op">$</span><span class="va">content</span><span class="op">)</span></span>
<span><span class="va">mir</span> <span class="op">&lt;-</span> <span class="st">"https://storage.googleapis.com/soilspec4gg-public/ossl_mir_L0_v1.2.qs"</span></span>
<span><span class="va">mir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/curl/man/curl_fetch.html">curl_fetch_memory</a></span><span class="op">(</span><span class="va">mir</span><span class="op">)</span></span>
<span><span class="va">mir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/qs/man/qdeserialize.html">qdeserialize</a></span><span class="op">(</span><span class="va">mir</span><span class="op">$</span><span class="va">content</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Join</span></span>
<span><span class="va">ossl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">mir</span>, <span class="va">soil</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dataset.code_ascii_txt"</span>, <span class="st">"id.layer_uuid_txt"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="mongodb" class="section level2 unnumbered">
<h2>MongoDB<a class="anchor" aria-label="anchor" href="#mongodb"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Available collections:</strong></p>
<ul>
<li>
<strong>soilsite</strong>: site information, e.g., coordinates, pedons, layers, etc.<br>
</li>
<li>
<strong>soillab_L0</strong>: original soil laboratory data (wet chemistry), e.g., soil texture, carbon, etc.<br>
</li>
<li>
<strong>soillab_L1</strong>: harmonized soil laboratory data (wet chemistry), e.g., soil texture, carbon, etc.<br>
</li>
<li>
<strong>mir</strong>: MIR spectral data in the 600-4000 cm<sup>-1</sup> range with metadata.<br>
</li>
<li>
<strong>visnir</strong>: VisNIR spectral data in the 350-2500 nm range with metadata.<br>
</li>
<li>
<strong>ossl_L0</strong>: Whole OSSL with all separate tables joined at level 0.<br>
</li>
<li>
<strong>ossl_L1</strong>: Whole OSSL with all separate tables joined at level 1.</li>
</ul>
<p><strong>Code example:</strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Packages and helping functions</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jeroen/mongolite/">mongolite</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">jsonify</span><span class="op">)</span></span>
<span></span>
<span><span class="va">soilspec4gg.db</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  host <span class="op">=</span> <span class="st">'api.soilspectroscopy.org'</span>,</span>
<span>  name <span class="op">=</span> <span class="st">'soilspec4gg'</span>,</span>
<span>  user <span class="op">=</span> <span class="st">'soilspec4gg'</span>,</span>
<span>  pw <span class="op">=</span> <span class="st">'soilspec4gg'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span></span>
<span>  <span class="st">'mongodb://'</span>, <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">user</span>, <span class="st">':'</span>, </span>
<span>  <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">pw</span>, <span class="st">'@'</span>, </span>
<span>  <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">host</span>, <span class="st">'/'</span>, </span>
<span>  <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">name</span>, <span class="st">'?ssl=true'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">soilspec4gg.init</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">'Creating the access for mongodb collections.'</span><span class="op">)</span></span>
<span>  <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span> <span class="op">&lt;&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    soilsite <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/mongolite/man/mongo.html">mongo</a></span><span class="op">(</span>collection <span class="op">=</span> <span class="st">'soilsite'</span>, url <span class="op">=</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">url</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    soillab_L0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/mongolite/man/mongo.html">mongo</a></span><span class="op">(</span>collection <span class="op">=</span> <span class="st">'soillab_L0'</span>, url <span class="op">=</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">url</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    soillab_L1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/mongolite/man/mongo.html">mongo</a></span><span class="op">(</span>collection <span class="op">=</span> <span class="st">'soillab_L1'</span>, url <span class="op">=</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">url</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    mir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/mongolite/man/mongo.html">mongo</a></span><span class="op">(</span>collection <span class="op">=</span> <span class="st">'mir'</span>, url <span class="op">=</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">url</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    visnir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/mongolite/man/mongo.html">mongo</a></span><span class="op">(</span>collection <span class="op">=</span> <span class="st">'visnir'</span>, url <span class="op">=</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">url</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    ossl_L0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/mongolite/man/mongo.html">mongo</a></span><span class="op">(</span>collection <span class="op">=</span> <span class="st">'ossl_L0'</span>, url <span class="op">=</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">url</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    ossl_L1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/mongolite/man/mongo.html">mongo</a></span><span class="op">(</span>collection <span class="op">=</span> <span class="st">'ossl_L1'</span>, url <span class="op">=</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">url</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## Accessing the database</span></span>
<span></span>
<span><span class="co"># Initialization</span></span>
<span><span class="fu">soilspec4gg.init</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Checking available collections</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get all records for soilsite table</span></span>
<span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">soilsite</span><span class="op">$</span><span class="fu">count</span><span class="op">(</span><span class="st">"{}"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read all data from a collection back to the R environment</span></span>
<span><span class="va">soilsite</span> <span class="op">&lt;-</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">soilsite</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{}'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Getting unique values for a field</span></span>
<span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">soilsite</span><span class="op">$</span><span class="fu">distinct</span><span class="op">(</span>key <span class="op">=</span> <span class="st">"dataset_code_ascii_txt"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Getting column names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">ossl_L0</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{}'</span>, limit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">ossl_L1</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{}'</span>, limit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">soilsite</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{}'</span>, limit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">soillab_L0</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{}'</span>, limit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">soillab_L1</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{}'</span>, limit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">mir</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{"dataset_code_ascii_txt": "KSSL.SSL"}'</span>, limit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">visnir</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{"dataset_code_ascii_txt": "LUCAS.SSL"}'</span>, limit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Query a specific dataset</span></span>
<span><span class="va">soilsite.serbia</span> <span class="op">&lt;-</span> <span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">soilsite</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{"dataset_code_ascii_txt" : "SERBIA.SSL"}'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filtering by ID</span></span>
<span><span class="va">soilspec4gg.db</span><span class="op">$</span><span class="va">collections</span><span class="op">$</span><span class="va">soilsite</span><span class="op">$</span><span class="fu">find</span><span class="op">(</span><span class="st">'{"id_layer_uuid_txt": "50d0bfaaf50feb0ba2c8a3aa2cd788bb"}'</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="api" class="section level2 unnumbered">
<h2>API<a class="anchor" aria-label="anchor" href="#api"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://api.soilspectroscopy.org/__docs__/#/">OSSL API</a> (Application Programming Interface) is also available and can be used to construct requests to fetch data, models and generate predictions. The outputs of predictions can be obtained as <a href="https://www.json.org/json-en.html">JSON</a> or CSV files, making the system fully interoperable. The OSSL API is at the moment based on using the <a href="https://www.rplumber.io/">plumber package</a> and is <strong>provided for testing purposes only</strong>. Users can make predictions with pretrained models for 20 spectra per request, but these limits will be gradually extended.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:ossl-api"></span>
<img src="img/preview_ossl_api_swagger.png" alt="OSSL API is available for testing." width="100%"><p class="caption">
Figure 4.1: OSSL API is available for testing.
</p>
</div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="ossl-database-description.html"><span class="header-section-number">3</span> OSSL database description</a></div>
<div class="next"><a href="ossl-reference-models.html"><span class="header-section-number">5</span> OSSL reference models</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#ossl-database-access"><span class="header-section-number">4</span> OSSL database access</a></li>
<li><a class="nav-link" href="#google-cloud-storage">Google Cloud Storage</a></li>
<li><a class="nav-link" href="#mongodb">MongoDB</a></li>
<li><a class="nav-link" href="#api">API</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/soilspectroscopy/ossl-manual/blob/master/040-database_access.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/soilspectroscopy/ossl-manual/edit/master/040-database_access.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Open Soil Spectral Library</strong>" was written by Woodwell Climate Research Center, University of Florida, OpenGeoHub and contributors. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
